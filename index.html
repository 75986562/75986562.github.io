<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.5.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.5.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.5.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.5.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.5.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="个人学习博客">
<meta property="og:type" content="website">
<meta property="og:title" content="萌面超人">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="萌面超人">
<meta property="og:description" content="个人学习博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="萌面超人">
<meta name="twitter:description" content="个人学习博客">






  <link rel="canonical" href="http://yoursite.com/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>萌面超人</title>
  











  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">萌面超人</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-schedule">
    <a href="/schedule/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>日程表</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">
    <a href="/404/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>公益 404</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/12/Shell脚本实现服务器活跃情况检测/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/12/Shell脚本实现服务器活跃情况检测/" itemprop="url">
                  Shell脚本实现服务器活跃情况检测
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-12 16:37:30 / 修改时间：23:15:30" itemprop="dateCreated datePublished" datetime="2019-04-12T16:37:30+08:00">2019-04-12</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Shell/" itemprop="url" rel="index"><span itemprop="name">Shell</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="Shell脚本实现服务器活跃情况检测"><a href="#Shell脚本实现服务器活跃情况检测" class="headerlink" title="Shell脚本实现服务器活跃情况检测"></a>Shell脚本实现服务器活跃情况检测</h1><p>在没有网络监控软件的情况下，我们想检测服务其他人提供的环境是否能一直保持畅通，我们可以通过定时启动shell脚本来实现服务器活性检测这个功能。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># check link</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在脚本执行目录下创建日志文件 .log 和检测的最终结果文件.dat</span></span><br><span class="line">resultfile=<span class="variable">$PWD</span>/checklink.dat</span><br><span class="line">log_file=<span class="variable">$PWD</span>/checklink.log</span><br><span class="line"></span><br><span class="line"><span class="comment">#请根据实际需求更改</span></span><br><span class="line">IP=127.0.0.1</span><br><span class="line">port=8080</span><br><span class="line"></span><br><span class="line"><span class="comment">#判断两个参数是否为空</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="variable">$IP</span> -o -z <span class="variable">$port</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> `date +<span class="string">"%Y.%m.%d %T"</span>`<span class="string">"the parameter should not be null,exit!"</span> &gt;&gt;<span class="variable">$&#123;log_file&#125;</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#通过Ping命令先检测指定的ip地址是否能连通，通过ping命令发送四个包(可以是发送另外的数量)，限制超时时间为3秒钟(也可以是其他值，具体要看能忍受多长时间的延迟)，主要根据丢包的比例来决定该ip地址是否能连通，比如ping 百度返回id结果如下：</span></span><br><span class="line"></span><br><span class="line">zxin10@ubuntu:~/lijian$ ping www.baidu.com -c 4 -w 3</span><br><span class="line">PING www.a.shifen.com (180.97.33.108) 56(84) bytes of data.</span><br><span class="line">64 bytes from 180.97.33.108: icmp_seq=1 ttl=128 time=3.79 ms</span><br><span class="line">64 bytes from 180.97.33.108: icmp_seq=2 ttl=128 time=5.32 ms</span><br><span class="line">64 bytes from 180.97.33.108: icmp_seq=3 ttl=128 time=3.92 ms</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--- www.a.shifen.com ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2004ms</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RATE=`ping -c 4 -w 3 <span class="variable">$IP</span> | grep <span class="string">'packet loss'</span> | grep -v grep | awk -F<span class="string">','</span> <span class="string">'&#123;print $3&#125;'</span> | awk -F<span class="string">'%'</span> <span class="string">'&#123;print $1&#125;'</span>`     <span class="comment">#得到丢包的比例的数值</span></span><br><span class="line"><span class="comment">#RATE=`ping -c 4 -w 3 $IP | grep 'packet loss' | grep -v grep | cut -f3 -d, | cut -f1 -d%`</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$RATE</span> -eq 100 ]     <span class="comment">#这个值具体可以设置成75、50等等，这里设置成包全丢的情况下为不通</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> `date +<span class="string">"%Y.%m.%d %T"</span>`<span class="string">" ping the <span class="variable">$IP</span> is not connected, FAILURE"</span> &gt;&gt;<span class="variable">$&#123;log_file&#125;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"FAILURE"</span>           <span class="comment">#全丢了说明该IP地址不通</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	telnet <span class="variable">$IP</span> <span class="variable">$port</span>&lt;&lt;@@@ 2&gt;<span class="variable">$&#123;resultfile&#125;</span> 1&gt;&amp;2       <span class="comment">#否则telnet命令检测指定端口号PORT是否连通，如果可以连通，则立马quit退出连接，将连接结果和错误信息等都写入到结果文件中</span></span><br><span class="line">	quit</span><br><span class="line">	@@@</span><br><span class="line"></span><br><span class="line">    RESULT=`cat <span class="variable">$&#123;resultfile&#125;</span> 2&gt;/dev/null | grep <span class="string">"Connection closed by foreign host"</span> | wc -l`       <span class="comment">#匹配看结果文件中手否有这句话</span></span><br><span class="line">    <span class="built_in">echo</span> `date +<span class="string">"%Y.%m.%d %T"</span>`<span class="string">"the result of telnet is <span class="variable">$RESULT</span>"</span> &gt;&gt;<span class="variable">$&#123;log_file&#125;</span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$RESULT</span> -eq 1 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> `date +<span class="string">"%Y.%m.%d %T"</span>`<span class="string">" telnet the <span class="variable">$IP</span> and <span class="variable">$port</span> SUCCESS"</span> &gt;&gt;<span class="variable">$&#123;log_file&#125;</span>     <span class="comment">#如果有的话就说明该端口是通的，返回结果字符串SUCCESS到文件并同时打印大屏幕上</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"SUCCESS"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> `date +<span class="string">"%Y.%m.%d %T"</span>`<span class="string">" telnet the <span class="variable">$IP</span> and <span class="variable">$port</span> FAILURE"</span> &gt;&gt;<span class="variable">$&#123;log_file&#125;</span>     <span class="comment">#否则就说明该端口是不通的，打印FAILURE</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"FAILURE"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">rm -f <span class="variable">$&#123;resultfile&#125;</span></span><br></pre></td></tr></table></figure>
<p>但是问题来的，有些地址是不可以ping的，但是可以telnet。这样其实更简单了<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># check link</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在脚本执行目录下创建日志文件 .log 和检测的最终结果文件.txt(临时文件)</span></span><br><span class="line">resultfile=<span class="variable">$PWD</span>/checklink.txt</span><br><span class="line">log_file=<span class="variable">$PWD</span>/checklink.log</span><br><span class="line">IP=127.0.0.1</span><br><span class="line">port=8080</span><br><span class="line">telnet <span class="variable">$IP</span> <span class="variable">$port</span>&lt;&lt;@@@ 2&gt;&gt;<span class="variable">$&#123;resultfile&#125;</span> 1&gt;&amp;2</span><br><span class="line">quit</span><br><span class="line">@@@</span><br><span class="line"></span><br><span class="line">RESULT=`cat <span class="variable">$&#123;resultfile&#125;</span> 2&gt;/dev/null | grep <span class="string">"Connection closed by foreign host"</span> | wc -l`</span><br><span class="line"><span class="built_in">echo</span> `date +<span class="string">"%Y.%m.%d %T"</span>`<span class="string">"the result of telnet is <span class="variable">$RESULT</span>"</span> &gt;&gt;<span class="variable">$&#123;log_file&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$RESULT</span> -eq 1 ]</span><br><span class="line">    <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> `date +<span class="string">"%Y.%m.%d %T"</span>`<span class="string">" telnet the <span class="variable">$IP</span> and <span class="variable">$port</span> SUCCESS"</span> &gt;&gt;<span class="variable">$&#123;log_file&#125;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"SUCCESS"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> `date +<span class="string">"%Y.%m.%d %T"</span>`<span class="string">" telnet the <span class="variable">$IP</span> and <span class="variable">$port</span> FAILURE"</span> &gt;&gt;<span class="variable">$&#123;log_file&#125;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"FAILURE"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">rm -f <span class="variable">$&#123;resultfile&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>脚本完成后，进行以下操作<br>则可以，输入命令或者直接修改文件，添加一行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#赋予执行权限</span></span><br><span class="line">chmod -x checklink.sh </span><br><span class="line"><span class="comment">#开始进行定时执行设置</span></span><br><span class="line">crontab -e </span><br><span class="line"><span class="comment">#添加这一条，以下为每分钟执行一次</span></span><br><span class="line">*/1 * * * *  /opt/shell/checklink.sh</span><br></pre></td></tr></table></figure></p>
<p>这样就可以了，找到一段时间后可在相应目录查找checklink.log文件。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/08/Head First设计模式10/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/08/Head First设计模式10/" itemprop="url">
                  Head First设计模式10
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-08 16:37:30" itemprop="dateCreated datePublished" datetime="2019-04-08T16:37:30+08:00">2019-04-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-10 21:20:30" itemprop="dateModified" datetime="2019-04-10T21:20:30+08:00">2019-04-10</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="Head-First设计模式10"><a href="#Head-First设计模式10" class="headerlink" title="Head First设计模式10"></a>Head First设计模式10</h1><h2 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h2><ol>
<li>封装变化。 </li>
<li>面向接口编程而非实现。</li>
<li>优先使用组合而非继承。 </li>
<li>为了交互对象之间的松耦合设计而努力。</li>
<li>类应该对扩展开放，对修改关闭。</li>
<li>依赖倒置原则，要依赖抽象，不要依赖具体类。</li>
<li>最少知识原则</li>
<li>好莱坞原则</li>
</ol>
<h2 id="模式类型"><a href="#模式类型" class="headerlink" title="模式类型"></a>模式类型</h2><h3 id="类型归集"><a href="#类型归集" class="headerlink" title="类型归集"></a>类型归集</h3><ol>
<li>OO模式</li>
<li>观察者模式</li>
<li>装饰者模式</li>
<li>工厂模式</li>
<li>抽象工厂模式</li>
<li>命令模式</li>
<li>模板方法模式</li>
<li>组合模式</li>
<li>状态模式</li>
<li>代理模式</li>
</ol>
<h3 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h3><h3 id="状态模式-1"><a href="#状态模式-1" class="headerlink" title="状态模式"></a>状态模式</h3><p>定义：允许对象在内部状态改变时改变它的行为，对象看起来好像修改了他的类。</p>
<p>在状态模式（State Pattern）中，类的行为是基于它的状态改变的。这种类型的设计模式属于行为型模式。我们创建表示各种状态的对象和一个行为随着状态对象改变而改变的 context 对象，将行为局部化。</p>
<h4 id="策略模式和状态模式"><a href="#策略模式和状态模式" class="headerlink" title="策略模式和状态模式"></a>策略模式和状态模式</h4><p>这两个模式十分相似，但策略模式通常会用行为或者方法来配置Context类，会去控制对象使用的策略。而状态模式是允许Context类随着状态的改变而改变行为。意图正是两者的区别。</p>
<p>使用场景：代码中包含大量与对象状态有关的条件语句。</p>
<h3 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h3>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/06/java异常处理/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/06/java异常处理/" itemprop="url">
                  java异常处理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-04-06 16:37:30 / 修改时间：21:20:30" itemprop="dateCreated datePublished" datetime="2019-04-06T16:37:30+08:00">2019-04-06</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="java异常处理"><a href="#java异常处理" class="headerlink" title="java异常处理"></a>java异常处理</h1><h2 id="使用-ControllerAdvice-拦截异常并统一处理"><a href="#使用-ControllerAdvice-拦截异常并统一处理" class="headerlink" title="使用@ControllerAdvice 拦截异常并统一处理"></a>使用@ControllerAdvice 拦截异常并统一处理</h2><h3 id="ControllerAdvice注解简介"><a href="#ControllerAdvice注解简介" class="headerlink" title="@ControllerAdvice注解简介"></a>@ControllerAdvice注解简介</h3><ol>
<li>通过<code>@ControllerAdvice</code>注解可以将对于控制器的全局配置放在同一个位置。</li>
<li>注解了<code>@Controller</code>的类的方法可以使用<code>@ExceptionHandler</code>、<code>@InitBinder</code>、<code>@ModelAttribute</code>注解到方法上。</li>
<li><strong><code>@ControllerAdvice</code>注解将作用在所有注解了<code>@RequestMapping</code>的控制器的方法上</strong></li>
<li><code>@ExceptionHandler</code>：用于全局处理控制器里的异常。</li>
</ol>
<h3 id="使用例子"><a href="#使用例子" class="headerlink" title="使用例子"></a>使用例子</h3><ol>
<li>创建MyControllerAdvice，并添加 @ControllerAdvice注解。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyControllerAdvice</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//全局异常捕捉处理</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(value = Exception.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map <span class="title">errorHandler</span><span class="params">(Exception ex)</span> </span>&#123;</span><br><span class="line">        Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">        map.put(<span class="string">"code"</span>, <span class="number">100</span>);</span><br><span class="line">        map.put(<span class="string">"msg"</span>, ex.getMessage());</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//拦截捕捉自定义异常 MyException.class</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(value = MyException.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map <span class="title">myErrorHandler</span><span class="params">(MyException ex)</span> </span>&#123;</span><br><span class="line">        Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">        map.put(<span class="string">"code"</span>, ex.getCode());</span><br><span class="line">        map.put(<span class="string">"msg"</span>, ex.getMsg());</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>编写自定义异常类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">(String code, String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="comment">// getter &amp; setter</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>controller中抛出异常进行测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/home/ex2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">home</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="comment">//        throw new Exception("程序异常");</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"101"</span>, <span class="string">"自定义异常"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试<br>启动应用，访问：<a href="http://localhost:8080/home/ex" target="_blank" rel="noopener">http://localhost:8080/home/ex</a> ，正常显示以下json内容，证明自定义异常已经成功被拦截。<br><code>{&quot;msg&quot;:&quot;自定义异常&quot;,&quot;code&quot;:&quot;101&quot;}</code> </p>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/27/oauth简介/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/27/oauth简介/" itemprop="url">
                  OAuth学习
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-27 16:37:30" itemprop="dateCreated datePublished" datetime="2019-03-27T16:37:30+08:00">2019-03-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-29 21:20:30" itemprop="dateModified" datetime="2019-03-29T21:20:30+08:00">2019-03-29</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/工具类/" itemprop="url" rel="index"><span itemprop="name">工具类</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="OAuth简介"><a href="#OAuth简介" class="headerlink" title="OAuth简介"></a>OAuth简介</h1><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[1] <a href="http://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html" target="_blank" rel="noopener">理解OAuth 2.0</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/09/Json工具类/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/09/Json工具类/" itemprop="url">
                  json工具类
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-09 16:37:30 / 修改时间：21:20:30" itemprop="dateCreated datePublished" datetime="2019-03-09T16:37:30+08:00">2019-03-09</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="Json工具类"><a href="#Json工具类" class="headerlink" title="Json工具类"></a>Json工具类</h1><h2 id="Json转javabean"><a href="#Json转javabean" class="headerlink" title="Json转javabean"></a>Json转javabean</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.hfi.health.hpp.medical.api.exception.JsonDeseriException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JsonUtil</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">String <span class="title">serialize</span><span class="params">(T obj)</span></span>&#123;</span><br><span class="line">            ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> mapper.writeValueAsString(obj);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">                <span class="comment">//</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">deserialize</span><span class="params">(String str, Class&lt;T&gt; clazz)</span> <span class="keyword">throws</span> JsonDeseriException </span>&#123;</span><br><span class="line">            ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> mapper.readValue(str, clazz);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> JsonDeseriException();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">mapToJson</span><span class="params">(Map params)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> JSONObject.toJSON(params).toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Map <span class="title">jsonToMap</span><span class="params">(String jsonParam)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (Map) JSON.parse(jsonParam);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/07/WebService简介/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/07/WebService简介/" itemprop="url">
                  WebService简介
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-07 16:37:30" itemprop="dateCreated datePublished" datetime="2019-03-07T16:37:30+08:00">2019-03-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-11 21:20:30" itemprop="dateModified" datetime="2019-03-11T21:20:30+08:00">2019-03-11</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/WebService/" itemprop="url" rel="index"><span itemprop="name">WebService</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="WebService学习"><a href="#WebService学习" class="headerlink" title="WebService学习"></a>WebService学习</h1><h2 id="webService简介"><a href="#webService简介" class="headerlink" title="webService简介"></a>webService简介</h2><p>webService接口，cxf框架，用xml配置暴露的接口，接口提供方可以用已实现序列化接口的对象来接收，当然，一般接口的数据结构没有那么简单，那我们也可以相对应的在我们要接收数据的对象里加List或者对象属性来实现。cxf框架会自动把xml数据转化为我们所需的对象，底层传输的实际上是通过http协议传输xml数据（可以写一个拦截器获取发送的xml文件）</p>
<p>说白了就是xml文档的生成、传递、解析的过程。客户端生成xml文件后通过网络传送给服务器，服务器解析xml，获取参数执行方法得到返回值，之后生成xml文件，再传输给客户端，客户端解析xml后显示数据。</p>
<p>xml传输数据的话一般是webSerivce,偏银行多一些；而Json则偏互联网多一些。暴露接口的话，我们可以写一个controller,用@RequestMapping(“xxxx”)来指定接口的调用地址；底层传输的都是json字符串，我们可以用String来接收，也可以用对象来接收（实现序列化接口），一般用的框架有阿里的fastjson跟springMvc自带的jackson</p>
<h2 id="暴露webservice服务"><a href="#暴露webservice服务" class="headerlink" title="暴露webservice服务"></a>暴露webservice服务</h2><h3 id="场景一：Spring-boot2-X"><a href="#场景一：Spring-boot2-X" class="headerlink" title="场景一：Spring boot2.X"></a>场景一：Spring boot2.X</h3><p>环境：Spring boot2.X</p>
<ol>
<li>添加cxf依赖</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">   &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;</span><br><span class="line">   &lt;artifactId&gt;cxf-spring-boot-starter-jaxws&lt;/artifactId&gt;</span><br><span class="line">   &lt;version&gt;3.2.5&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在外放的Facade接口上添加@WebService注解，方法上添加@WebMethod注解</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebService</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AuthServiceFacade</span> </span>&#123;</span><br><span class="line">    <span class="meta">@WebMethod</span></span><br><span class="line">    <span class="function">AuthResponse <span class="title">auth</span><span class="params">(AuthRequest request)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p>实现类上添加注解@WebService注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@WebService</span>(targetNamespace = <span class="string">"http://webservice.company.com/"</span>,endpointInterface = <span class="string">"com.***.auth.service.facade.AuthServiceFacade"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BankCardSingleAuthServiceImpl</span> <span class="keyword">extends</span> <span class="title">AbstractAuthService</span></span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span> <span class="title">AuthServiceFacade</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置WebServiceConfig</p>
</li>
<li>在启动类的main函数中添加以下代码<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@AutoConfigureBefore</span></span><br><span class="line"><span class="meta">@MapperScan</span>(<span class="string">"com.hfi.web01.mapper"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Web01Application</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Service service = <span class="keyword">new</span> Service();</span><br><span class="line">        Endpoint.publish(<span class="string">"http://"</span>+url+<span class="string">":8080/service"</span>, service);</span><br><span class="line">        SpringApplication.run(Web01Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="场景二：通过CommandLineRunner暴露"><a href="#场景二：通过CommandLineRunner暴露" class="headerlink" title="场景二：通过CommandLineRunner暴露"></a>场景二：通过CommandLineRunner暴露</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SpringBoot启动后会自动加载并暴露服务，服务ip可以动态适配</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Order</span>(<span class="number">1</span>)<span class="comment">//数字为初始化顺序</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CxfConfig</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;url:localhost&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String url ;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span></span>&#123;</span><br><span class="line">        Service service = <span class="keyword">new</span> Service();</span><br><span class="line">        Endpoint.publish(<span class="string">"http://"</span>+url+<span class="string">":8080/service"</span>, service);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Wsdl文件"><a href="#Wsdl文件" class="headerlink" title="Wsdl文件"></a>Wsdl文件</h2><h3 id="重要属性"><a href="#重要属性" class="headerlink" title="重要属性"></a>重要属性</h3><p>重要标签的说明</p>
<p>· <strong>types</strong> - 数据类型(标签)定义的容器，里面使用schema定义了一些标签结构供message引用</p>
<p>· <strong>message</strong> - 通信消息的数据结构的抽象类型化定义。引用types中定义的标签</p>
<p>· <strong>operation</strong> - 对服务中所支持的操作的抽象描述，一个operation描述了一个访问入口的请求消息与响应消息对。</p>
<p>· <strong>portType</strong> - 对于某个访问入口点类型所支持的操作的抽象集合，这些操作可以由一个或多个服务访问点来支持。</p>
<p>· <strong>binding</strong> - 特定端口类型的具体协议和数据格式规范的绑定。</p>
<p>· <strong>service</strong>- 相关服务访问点的集合</p>
<p>· <strong>port</strong> - 定义为协议/数据格式绑定与具体Web访问地址组合的单个服务访问点。</p>
<h2 id="常见错误"><a href="#常见错误" class="headerlink" title="常见错误"></a>常见错误</h2><h3 id="无法通过包wsdl文件以maven打包的方式生成"><a href="#无法通过包wsdl文件以maven打包的方式生成" class="headerlink" title="无法通过包wsdl文件以maven打包的方式生成"></a>无法通过包wsdl文件以maven打包的方式生成</h3><p>需要删除maven打包的targe再打包即可生成</p>
<h3 id="WebService注解的类中无法注入-Autowrite"><a href="#WebService注解的类中无法注入-Autowrite" class="headerlink" title="@WebService注解的类中无法注入@Autowrite"></a>@WebService注解的类中无法注入@Autowrite</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebService</span>(endpointInterface = <span class="string">"***"</span>, serviceName = <span class="string">"***"</span>)</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebService</span> <span class="keyword">implements</span> <span class="title">IWebService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ISecondService secondService;</span><br><span class="line"><span class="comment">//      这里使用静态，让 service 属于类</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">//装载单个配置文件实例化ApplicationContext容器</span></span><br><span class="line">        ApplicationContext ctx = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"spring\\dubbo.xml"</span>);</span><br><span class="line">        secondService = (ISecondService) ctx.getBean(<span class="string">"secondService"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>*** soupUI能调试通但注册到别人服务中无法接收到请求<br>两个服务之间格式不一样，可以在注册服务中再包一层。</p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[1] <a href="https://blog.csdn.net/qq_30750447/article/details/80956595" target="_blank" rel="noopener">SpringBoot+Dubbo+zk实现暴露与调用外网接口</a></p>
<p>[2] <a href="https://www.cnblogs.com/lthaoshao/p/9517693.html" target="_blank" rel="noopener">使用SpringBoot2.X发布WebService接口</a></p>
<p>[3] <a href="https://blog.csdn.net/a412588063/article/details/55049602" target="_blank" rel="noopener">Webservice底层调用的本质</a></p>
<p>[4] <a href="https://www.cnblogs.com/fuxin41/p/6289162.html" target="_blank" rel="noopener">Spring boot+CXF开发WebService Demo</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/05/java-XML解析工具类/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/05/java-XML解析工具类/" itemprop="url">
                  java-XML解析工具类
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-05 16:37:30 / 修改时间：21:20:30" itemprop="dateCreated datePublished" datetime="2019-03-05T16:37:30+08:00">2019-03-05</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="java-XML解析工具类"><a href="#java-XML解析工具类" class="headerlink" title="java-XML解析工具类"></a>java-XML解析工具类</h1><h2 id="xstream"><a href="#xstream" class="headerlink" title="xstream"></a>xstream</h2><h3 id="小例子"><a href="#小例子" class="headerlink" title="小例子"></a>小例子</h3><p><a href="https://blog.csdn.net/dc282614966/article/details/80970750" target="_blank" rel="noopener">对象（java bean）与xml之间的转换（Xstream）</a></p>
<h3 id="使用详解"><a href="#使用详解" class="headerlink" title="使用详解"></a>使用详解</h3><p><a href="https://www.cnblogs.com/webyyq/p/6713323.html" target="_blank" rel="noopener">XStream使用详解</a></p>
<p><a href="http://www.cnblogs.com/mengfanrong/p/5023770.html" target="_blank" rel="noopener">XStream 用法汇总</a></p>
<h3 id="Xstream注解详解"><a href="#Xstream注解详解" class="headerlink" title="Xstream注解详解"></a>Xstream注解详解</h3><p><a href="https://blog.csdn.net/robert_mm/article/details/8459879" target="_blank" rel="noopener">xstream中几个注解的含义和用法</a></p>
<h2 id="Jaxb"><a href="#Jaxb" class="headerlink" title="Jaxb"></a>Jaxb</h2><p><a href="https://www.cnblogs.com/nmdzwps/p/6727385.html" target="_blank" rel="noopener">jaxb详解以及soap接口报文例子</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/01/Linux中URL特殊字符处理/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/01/Linux中URL特殊字符处理/" itemprop="url">
                  Linux中URL特殊字符处理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-03-01 16:37:30 / 修改时间：21:20:30" itemprop="dateCreated datePublished" datetime="2019-03-01T16:37:30+08:00">2019-03-01</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="Linux中URL特殊字符处理"><a href="#Linux中URL特殊字符处理" class="headerlink" title="Linux中URL特殊字符处理"></a>Linux中URL特殊字符处理</h1><p>服务器中使用<code>curl</code>命令时，当遇到一些特殊字符的时候需要进行转义</p>
<p>最简单的方法是在命令前后加上‘’，如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl &apos;http://localhost:8080/test/111&amp;222&apos;</span><br></pre></td></tr></table></figure></p>
<p>也可以使用URL特殊字符需转义来进行访问 </p>
<p>1、空格换成加号(+)<br>2、正斜杠(/)分隔目录和子目录<br>3、问号(?)分隔URL和查询<br>4、百分号(%)制定特殊字符<br>5、#号指定书签<br>6、&amp;号分隔参数  </p>
<p>转义字符的原因： </p>
<p>如果你的表单使用get方法提交，并且提交的参数中有“&amp;”等特殊符的话，如果不做处理，在service端就会将&amp;后面的作为另外一个参数来看待。例如<br>表单的action为list.jsf?act=go&amp;state=5<br>则提交时通过request.getParameter可以分别取得act和state的值。<br>如果你的本意是act=’go&amp;state=5’这个字符串，那么为了在服务端拿到act的准确值，你必须对&amp;进行转义 </p>
<p>url转义字符原理： </p>
<p>将这些特殊的字符转换成ASCII码，格式为：%加字符的ASCII码，即一个百分号%，后面跟对应字符的ASCII（16进制）码值。例如 空格的编码值是”%20”。 </p>
<p>URL特殊符号及对应的十六进制值编码： </p>
<ol>
<li><ul>
<li>URL 中+号表示空格 %2B </li>
</ul>
</li>
<li>空格 URL中的空格可以用+号或者编码 %20 </li>
<li>/  分隔目录和子目录 %2F  </li>
<li>?  分隔实际的 URL 和参数 %3F  </li>
<li>% 指定特殊字符 %25  </li>
<li>#表示书签 %23  </li>
<li>&amp; URL 中指定的参数间的分隔符 %26  </li>
<li>= URL 中指定参数的值 %3D </li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/19/JAVA类加载和反射介绍/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/19/JAVA类加载和反射介绍/" itemprop="url">
                  JAVA类加载和反射介绍
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-02-19 21:37:30" itemprop="dateCreated datePublished" datetime="2019-02-19T21:37:30+08:00">2019-02-19</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/JAVA/" itemprop="url" rel="index"><span itemprop="name">JAVA</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="JAVA类加载和反射介绍"><a href="#JAVA类加载和反射介绍" class="headerlink" title="JAVA类加载和反射介绍"></a>JAVA类加载和反射介绍</h1><h2 id="JAVA类加载和反射简介"><a href="#JAVA类加载和反射简介" class="headerlink" title="JAVA类加载和反射简介"></a>JAVA类加载和反射简介</h2><p>简单的来说，反射机制指的是程序在运行时能够获取自身的信息。在java中，只要给定类的名字，那么就可以通过反射机制来获得类的所有信息.</p>
<p>那么反射是什么呢？当我们的程序在运行时，需要动态的加载一些类这些类可能之前用不到所以不用加载到jvm，而是在运行时根据需要才加载。</p>
<h3 id="Java反射的作用"><a href="#Java反射的作用" class="headerlink" title="Java反射的作用"></a>Java反射的作用</h3><p>在Java运行时环境中，对于任意一个类，可以知道这个类有哪些属性和方法。对于任意一个对象，可以调用它的任意一个方法。这种动态获取类的信息以及动态调用对象的方法的功能来自于Java 语言的反射（Reflection）机制。</p>
<blockquote>
<p>Java的反射机制的实现要借助于4个类：class，Constructor，Field，Method;</p>
</blockquote>
<p>Java 反射机制主要提供了以下功能：  </p>
<ol>
<li>在运行时判断任意一个对象所属的类。</li>
<li>在运行时构造任意一个类的对象。</li>
<li>在运行时判断任意一个类所具有的成员变量和方法。</li>
<li>在运行时调用任意一个对象的方法</li>
</ol>
<p>其中class代表的是类对象，Constructor－类的构造器对象，Field－类的属性对象，Method－类的方法对象，通过这四个对象我们可以粗略的看到一个类的各个组成部分。</p>
<p><img src="https://pic4.zhimg.com/80/v2-4face8109e0d52ef5894c41c69e4ec6b_hd.jpg" alt="反射详解图"></p>
<p>当程序主动使用某个类时，若该类还没加载到内存中，系统会通过<strong>加载，链接，初始化</strong>3个操作对类进行初始化。<br>类字面常量”,class”创建Class对象的引用时，不会自动地初始化该Class对象，准备工作包含3个步骤:</p>
<ol>
<li><strong>加载</strong>:由类加载器执行，该步骤查找字节码,并从这些字节码中创建一个Class对象</li>
<li><strong>链接</strong>:在链接阶段将验证类中的字节码，为静态域分配存储空间，并且如果必需的话，将解析这个类创建的对其他类的所有引用。</li>
<li><strong>初始化</strong>:如果该类有超类，则对其初始化，执行静态初始化器和静态初始化块</li>
</ol>
<h3 id="类的初始化时机"><a href="#类的初始化时机" class="headerlink" title="类的初始化时机"></a>类的初始化时机</h3><ol>
<li>创建类的实例</li>
<li>访问类或接口的静态变量（static final常量除外，static final变量可以）</li>
<li>调用类的静态方法</li>
<li>反射（Class.forName(packageName.className)）</li>
<li>初始化类的子类（子类初始化问题：满足主动调用，即访问子类中的静态变量、方法，否则仅父类初始化）</li>
<li>java虚拟机启动时被标明为启动类的类</li>
</ol>
<p>注：加载顺序：启动类的static block最先加载<br>(<code>父类静态成员、静态代码块</code>—&gt;<code>子类静态成员、静态代码块</code>—&gt;<code>父类实例成员、代码块</code>——&gt;<code>父类构造函数</code>—&gt;<code>子类实例成员、代码块</code>—&gt;<code>子类构造函数</code>)</p>
<p>我们需要明白在JAVA中任何class都要装载在虚拟机上才能运行，而forClass就是装载类用的，这是要和new不一样，要分清楚哦。<br><code>A a = (A)Class.forName(“package.A”).newInstance();</code>和 <code>A a = new A;</code>是等价的。<br>记住一个概念，静态代码是和class绑定的,class装载成功就表示执行了你的静态代码，而且以后不会再走这套静态代码了。<br>Class.forName(xxx.xx.xx)的作用是要求JVM查找并加载指定的类，也即是说JVM会执行该类的静态代码段。</p>
<p>JAVA中获取Class对象有3种方式:</p>
<ol>
<li>Class.forName()</li>
<li>Object.getClass()</li>
<li>类字面常量 xx.class</li>
<li><h3 id="反射常用函数"><a href="#反射常用函数" class="headerlink" title="反射常用函数"></a>反射常用函数</h3></li>
</ol>
<p><strong>得到构造器的方法</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">javaConstructor getConstructor(Class[] params) -- 获得使用特殊的参数类型的公共构造函数， </span><br><span class="line"></span><br><span class="line">Constructor[] getConstructors() -- 获得类的所有公共构造函数 </span><br><span class="line"> </span><br><span class="line">Constructor getDeclaredConstructor(Class[] params) -- 获得使用特定参数类型的构造函数(与接入级别无关) </span><br><span class="line"> </span><br><span class="line">Constructor[] getDeclaredConstructors() -- 获得类的所有构造函数(与接入级别无关)</span><br></pre></td></tr></table></figure></p>
<p><strong>获得字段信息的方法</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Field <span class="title">getField</span><span class="params">(String name)</span> -- 获得命名的公共字段 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">Field[] <span class="title">getFields</span><span class="params">()</span> -- 获得类的所有公共字段 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">Field <span class="title">getDeclaredField</span><span class="params">(String name)</span> -- 获得类声明的命名的字段 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">Field[] <span class="title">getDeclaredFields</span><span class="params">()</span> -- 获得类声明的所有字段</span></span><br></pre></td></tr></table></figure></p>
<p><strong>获得方法信息的方法</strong><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Method <span class="title">getMethod</span><span class="params">(String name, Class[] params)</span> -- 使用特定的参数类型，获得命名的公共方法 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">Method[] <span class="title">getMethods</span><span class="params">()</span> -- 获得类的所有公共方法 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">Method <span class="title">getDeclaredMethod</span><span class="params">(String name, Class[] params)</span> -- 使用特写的参数类型，获得类声明的命名的方法 </span></span><br><span class="line"><span class="function"> </span></span><br><span class="line"><span class="function">Method[] <span class="title">getDeclaredMethods</span><span class="params">()</span> -- 获得类声明的所有方法</span></span><br></pre></td></tr></table></figure></p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[1] <a href="http://www.cnblogs.com/lijunamneg/archive/2013/03/25/2980991.html" target="_blank" rel="noopener">JAVA类加载和反射介绍</a></p>
<p>[2] <a href="https://www.zhihu.com/question/24304289" target="_blank" rel="noopener">学习java应该如何理解反射？<br>-知乎</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/18/Head First设计模式1-9/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="小华">
      <meta itemprop="description" content="个人学习博客">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="萌面超人">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/18/Head First设计模式1-9/" itemprop="url">
                  Head First设计模式1-9
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-01-18 16:37:30" itemprop="dateCreated datePublished" datetime="2019-01-18T16:37:30+08:00">2019-01-18</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-04-07 21:20:30" itemprop="dateModified" datetime="2019-04-07T21:20:30+08:00">2019-04-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/设计模式/" itemprop="url" rel="index"><span itemprop="name">设计模式</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="Head-First-设计模式1-9"><a href="#Head-First-设计模式1-9" class="headerlink" title="Head First 设计模式1-9"></a>Head First 设计模式1-9</h1><h2 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h2><ol>
<li>封装变化。 </li>
<li>面向接口编程而非实现。</li>
<li>优先使用组合而非继承。 </li>
<li>为了交互对象之间的松耦合设计而努力。</li>
<li>类应该对扩展开放，对修改关闭。</li>
<li>依赖倒置原则，要依赖抽象，不要依赖具体类。</li>
<li>最少知识原则</li>
<li>好莱坞原则</li>
</ol>
<h2 id="模式类型"><a href="#模式类型" class="headerlink" title="模式类型"></a>模式类型</h2><h3 id="类型归集"><a href="#类型归集" class="headerlink" title="类型归集"></a>类型归集</h3><ol>
<li>OO模式</li>
<li>观察者模式</li>
<li>装饰者模式</li>
<li>工厂模式</li>
<li>抽象工厂模式</li>
<li>命令模式</li>
<li>模板方法模式</li>
<li>组合模式</li>
<li>状态模式</li>
</ol>
<h3 id="OO模式"><a href="#OO模式" class="headerlink" title="OO模式"></a>OO模式</h3><h3 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h3><p>此种模式中，一个目标物件管理所有相依于它的观察者物件，并且在它本身的状态改变时主动发出通知。</p>
<p>观察者模式典型实现方式：    </p>
<ol>
<li>定义2个接口：观察者（通知）接口、被观察者（主题）接口 </li>
<li>定义2个类，观察者对象实现观察者接口、主题类实现被观者接口 </li>
<li>主题类注册自己需要通知的观察者    </li>
<li>主题类某个业务逻辑发生时通知观察者对象，每个观察者执行自己的业务逻辑。    </li>
</ol>
<h4 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h4><p>策略模式定义了算法族，分别封装起来让他们之间可以相互替换，此模式让算法的变化独立于使用算法的客户。  </p>
<p>策略模式实现方式：  </p>
<ol>
<li>定义1个抽象策略类（interface），各种不同的算法以不同的方式实现这个接口，环境角色使用这个接口调用不同的算法，一般使用接口或抽象类实现。  </li>
<li>定义具体策略类N个</li>
<li>定义环境类，持有一个策略类的引用，最终给客户端调用。</li>
</ol>
<h4 id="setChange-函数"><a href="#setChange-函数" class="headerlink" title="setChange()函数"></a>setChange()函数</h4><p>setChanged()方法可以让你在更新观察者时，有更多的弹性，你可以更<br>适当地通知观察者。让你可以在函数需要的时候再通知，而不是一有变化就通知。</p>
<h3 id="装饰者模式"><a href="#装饰者模式" class="headerlink" title="装饰者模式"></a>装饰者模式</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>装饰者模式动态地将责任附加到对象上。若要扩展功能，装饰者提供了比继承更有弹性的替代方案。</p>
<p>通常装饰者模式是采用抽象类，但是在Java中可以使用接口。尽管如此，通常我们都努力<br>避免修改现有的代码，所以，如果抽象类运作得好好的，还是别去修改它。</p>
<p>装饰者模式的一个“缺点”：利用装饰者模式，常常造成设计中有大量的小类，数量实在太多，可能会造成使用此API程序员的困扰。</p>
<h3 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h3><h4 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h4><p>简单工厂模式实现了生成产品类的代码跟客户端代码分离，在工厂类中你可以添加所需的生成产品的逻辑代码，但是问题来了，优秀的java代码是符合“开放-封闭”原则的，也就是说对扩展开发，对修改关闭，如果你要加一个产品类C，你就要修改工厂类里面的生成产品的代码，在这里你就要增加if-else判断。对于这个问题，我们的工厂方法模式就可以解决这个问题。</p>
<p><strong>优点</strong>：</p>
<ul>
<li>隐藏具体实现</li>
<li>解耦</li>
<li>简单<br><strong>缺点</strong>：</li>
<li>扩展麻烦，需要改动现有的代码</li>
<li>孤注一掷，所有的逻辑都放在一个工厂里面，一旦这个类出现什么问题，那么就全GG </li>
</ul>
<h4 id="工厂模式-1"><a href="#工厂模式-1" class="headerlink" title="工厂模式"></a>工厂模式</h4><p>定义：定义了一个创建对象的接口，但由子类决定要实例化的类是哪一个。工厂方法让类把实例化推迟到子类。</p>
<p>产品和工厂分离，它把工厂也抽象出一个接口来；它让一个工厂只负责生产一种产品；</p>
<p><strong>优点</strong>：</p>
<ul>
<li>隐藏具体实现</li>
<li>解耦</li>
<li>简单</li>
<li>扩展方便。</li>
<li><strong>缺点</strong>：</li>
<li>增加系统的负担</li>
<li>代码量剧增</li>
<li>一个工厂只能生产一个产品</li>
</ul>
<h4 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h4><p><strong>优点</strong>：</p>
<ul>
<li>隐藏具体实现</li>
<li>解耦</li>
<li>简单</li>
<li>扩展产品结构的时候，多个产品类，只需要写一个工厂类</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>扩展 <code>产品族</code> 很费劲 </li>
</ul>
<h3 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h3><p>确保一个类只有一个实例，并提供一个全局访问点。</p>
<p><strong>关键点：构造函数是私有的</strong></p>
<p>在计算机系统中，线程池、缓存、日志对象、对话框、打印机、显卡的驱动程序对象常被设计成单例的模式；</p>
<h4 id="单件模式和全局变量比较"><a href="#单件模式和全局变量比较" class="headerlink" title="单件模式和全局变量比较"></a>单件模式和全局变量比较</h4><p>急切实例化VS,延迟实例化。</p>
<p>全局变量可以提供全局访问，但是不能确保只有一个实例。全局变量也会变相鼓励开发人员，用许多全局变量指向许多小对象来造成命名空间的污染，单件不鼓励这样的现象，但单件任然可能被滥用。</p>
<h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><p>定义：将“请求”封装成对象，以便使用不同的请求、队列或者日志来参数化其他对象。命令模式也支持可撤销的操作。</p>
<p>设计空对象，表示什么都不做，这种设计可以免去一些校验操作。</p>
<h3 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h3><p>适配器模式：将一个类的接口转换成客户希望的另一个接口</p>
<h4 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h4><p>提供一个统一的接口，用来访问子系统中的一群接口。外观定义一个高层接口，让子系统更容易使用。</p>
<h3 id="模板方法模式"><a href="#模板方法模式" class="headerlink" title="模板方法模式"></a>模板方法模式</h3><p>模板方法模式：在一个方法中定义一个算法骨架，而将一些步骤延迟到子类中。模板方法使得子类在不改变算法结构的情况下，重新定义算法中的某些步骤。</p>
<h4 id="hook方法"><a href="#hook方法" class="headerlink" title="hook方法"></a>hook方法</h4><p>void hook():是指一种抽象类中可选的方法，你可以选择性的继承它，因此不需要把他设置为抽象方法，避免子类实现麻烦。</p>
<h4 id="好莱坞原则"><a href="#好莱坞原则" class="headerlink" title="好莱坞原则"></a>好莱坞原则</h4><p>别调用我们，我们会调用你。</p>
<p>防止“依赖腐败”（环形依赖调用），在此原则下，高层组件会调用低层组件，底层不应该调用高层。</p>
<h3 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h3><p>迭代器模式应用的场景及意义</p>
<ol>
<li>访问一个聚合对象的内容而无需暴露它的内部表示</li>
<li>支持对聚合对象的多种遍历</li>
<li>为遍历不同的聚合结构提供一个统一的接口</li>
</ol>
<h3 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h3><p><strong>定义</strong>：允许你将对象组合成树形结构来表现“整体/部分”层次结构。组合能让客户以一致的方式处理个别对象以及对象组合。</p>
<h3 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h3><p>定义：允许对象在内部状态改变时改变它的行为，对象看起来好像修改了他的类。</p>
<p>在状态模式（State Pattern）中，类的行为是基于它的状态改变的。这种类型的设计模式属于行为型模式。我们创建表示各种状态的对象和一个行为随着状态对象改变而改变的 context 对象，将行为局部化。</p>
<p>使用场景：代码中包含大量与对象状态有关的条件语句。</p>
<h2 id="附：UML图解释"><a href="#附：UML图解释" class="headerlink" title="附：UML图解释"></a>附：UML图解释</h2><p>箭头从A指向B，实线+实心箭头：A继承自B</p>
<p>箭头从A指向B，虚线线+实心箭头：实现关系，表现为继承抽象类</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">小华</p>
              <p class="site-description motion-element" itemprop="description">个人学习博客</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">35</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">20</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright"> &copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小华</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Pisces</a> v6.5.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.5.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.5.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.5.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.5.0"></script>



  



  










  





  

  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
